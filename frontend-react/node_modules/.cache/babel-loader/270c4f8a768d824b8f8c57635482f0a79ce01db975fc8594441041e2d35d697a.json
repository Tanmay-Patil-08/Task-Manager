{"ast":null,"code":"var _jsxFileName = \"/home/tanmay/project/hospital-management-frontend/frontend-react/src/SecurityContext/AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useState } from \"react\";\nimport { apiClient } from \"../api/ApiClient\";\nimport { excecuteBasicAuthenticationService } from '../api/AutheticationApiService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport const useAuth = () => {\n  _s();\n  return useContext(AuthContext);\n};\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport default function AuthProvider({\n  children\n}) {\n  _s2();\n  const [isAuthenticated, setAuthenticated] = useState(false);\n  const [token, setToken] = useState(null);\n  async function login(username, password) {\n    const baToken = 'Basic' + window.btoa(username + ':' + password);\n    try {\n      const response = await excecuteBasicAuthenticationService(baToken);\n      if (response.status == 200) {\n        setAuthenticated(true);\n        setToken(baToken);\n        apiClient.interceptors.request.use(config => {\n          config.headers.Authorization = baToken;\n          return config;\n        });\n        return true;\n      } else {\n        logout();\n        return false;\n      }\n    } catch (error) {\n      logout();\n      return false;\n    }\n  }\n  function logout() {\n    setAuthenticated(false);\n    setToken(null);\n  }\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      isAuthenticated,\n      login,\n      logout,\n      token\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n}\n_s2(AuthProvider, \"7zDj/Fs9SXE1bAD5SoRrpMymO8Y=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useContext","useState","apiClient","excecuteBasicAuthenticationService","jsxDEV","_jsxDEV","AuthContext","useAuth","_s","AuthProvider","children","_s2","isAuthenticated","setAuthenticated","token","setToken","login","username","password","baToken","window","btoa","response","status","interceptors","request","use","config","headers","Authorization","logout","error","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/tanmay/project/hospital-management-frontend/frontend-react/src/SecurityContext/AuthContext.js"],"sourcesContent":["\n\nimport { createContext, useContext, useState } from \"react\";\nimport { apiClient } from \"../api/ApiClient\";\nimport {excecuteBasicAuthenticationService} from '../api/AutheticationApiService'\n\nconst AuthContext = createContext()\nexport const useAuth= ()=>useContext(AuthContext)\n\nexport default function AuthProvider({children}) {\n    const[isAuthenticated,setAuthenticated] = useState(false)\n    const[token,setToken] = useState(null)\n    \n    async function login(username,password) {\n        const baToken = 'Basic'+window.btoa(username+':'+password)\n\n        try {\n            const response = await excecuteBasicAuthenticationService(baToken)\n\n            if (response.status == 200) {\n                setAuthenticated(true)\n                setToken(baToken)\n                apiClient.interceptors.request.use(\n                    (config) => {\n                        config.headers.Authorization=baToken\n                        return config \n                    }\n                )\n\n                return true\n            }else{\n                logout()\n                return false\n            }\n            \n        } catch (error) {\n            logout()\n            return false\n        }\n        \n    }\n    function logout(){\n        setAuthenticated(false)\n        setToken(null)\n      \n    }\n\n    return (\n        <AuthContext.Provider value ={{isAuthenticated,login,logout,token}}>\n            {children}\n        </AuthContext.Provider>\n\n    )\n    \n}"],"mappings":";;;AAEA,SAASA,aAAa,EAAEC,UAAU,EAAEC,QAAQ,QAAQ,OAAO;AAC3D,SAASC,SAAS,QAAQ,kBAAkB;AAC5C,SAAQC,kCAAkC,QAAO,gCAAgC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEjF,MAAMC,WAAW,gBAAGP,aAAa,CAAC,CAAC;AACnC,OAAO,MAAMQ,OAAO,GAAEA,CAAA;EAAAC,EAAA;EAAA,OAAIR,UAAU,CAACM,WAAW,CAAC;AAAA;AAAAE,EAAA,CAApCD,OAAO;AAEpB,eAAe,SAASE,YAAYA,CAAC;EAACC;AAAQ,CAAC,EAAE;EAAAC,GAAA;EAC7C,MAAK,CAACC,eAAe,EAACC,gBAAgB,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAK,CAACa,KAAK,EAACC,QAAQ,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EAEtC,eAAee,KAAKA,CAACC,QAAQ,EAACC,QAAQ,EAAE;IACpC,MAAMC,OAAO,GAAG,OAAO,GAACC,MAAM,CAACC,IAAI,CAACJ,QAAQ,GAAC,GAAG,GAACC,QAAQ,CAAC;IAE1D,IAAI;MACA,MAAMI,QAAQ,GAAG,MAAMnB,kCAAkC,CAACgB,OAAO,CAAC;MAElE,IAAIG,QAAQ,CAACC,MAAM,IAAI,GAAG,EAAE;QACxBV,gBAAgB,CAAC,IAAI,CAAC;QACtBE,QAAQ,CAACI,OAAO,CAAC;QACjBjB,SAAS,CAACsB,YAAY,CAACC,OAAO,CAACC,GAAG,CAC7BC,MAAM,IAAK;UACRA,MAAM,CAACC,OAAO,CAACC,aAAa,GAACV,OAAO;UACpC,OAAOQ,MAAM;QACjB,CACJ,CAAC;QAED,OAAO,IAAI;MACf,CAAC,MAAI;QACDG,MAAM,CAAC,CAAC;QACR,OAAO,KAAK;MAChB;IAEJ,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZD,MAAM,CAAC,CAAC;MACR,OAAO,KAAK;IAChB;EAEJ;EACA,SAASA,MAAMA,CAAA,EAAE;IACbjB,gBAAgB,CAAC,KAAK,CAAC;IACvBE,QAAQ,CAAC,IAAI,CAAC;EAElB;EAEA,oBACIV,OAAA,CAACC,WAAW,CAAC0B,QAAQ;IAACC,KAAK,EAAG;MAACrB,eAAe;MAACI,KAAK;MAACc,MAAM;MAAChB;IAAK,CAAE;IAAAJ,QAAA,EAC9DA;EAAQ;IAAAwB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACS,CAAC;AAI/B;AAAC1B,GAAA,CA7CuBF,YAAY;AAAA6B,EAAA,GAAZ7B,YAAY;AAAA,IAAA6B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}